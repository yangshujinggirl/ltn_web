function Page(){this.baseUrl=Config.get("baseUrl"),this.prop={},this.successCode="0"}Page.prototype.setTitle=function(o){document.getElementsByTagName("title")[0].innerHTML=o},Page.prototype.isSuccess=function(o,e){"undefined"==typeof e&&(e=!0);var t,n=o.resultCode,i=n===this.successCode;return!!i||(t=user().testResultCode(n),void("10000006"==n||"10000005"==n?(session().clear(),user().loginOperate()):e&&alert(t)))},Page.prototype.getErrorMessage=function(o){return console.log(o.resultMessage),o.resultMessage},Page.prototype.initTemplate=function(o,e,t){var n=document.getElementById(e),i=document.getElementById(t),s=i.innerHTML;n.innerHTML=doT.template(s)(o||{})},Page.prototype.when=function(o,e){e=e||[],"[object Function]"===Object.prototype.toString.call(e)&&(e=[e]);for(var t=$.when(o()),n=e.length,i=0;i<n;i++)t=t.done(e[i])},Page.prototype.getData=function(o,e,t,n){function i(o,e){e=e||[],"[object Function]"===Object.prototype.toString.call(e)&&(e=[e]);for(var t=e.length,n=0;n<t;n++)o=o.done(e[n]);return o}function s(o,e){e=e||[],"[object Function]"===Object.prototype.toString.call(e)&&(e=[e]);for(var t=e.length,n=0;n<t;n++)o=o.fail(e[n]);return o}o.indexOf(this.baseUrl)<0&&(o=this.baseUrl+o),e=e||{},e.clientType=e.clientType||"PC",e.sessionKey=e.sessionKey||constant().sessionKey||Url.getSearchParts("token");var r=Ajax.request(o,e);return r=s(r,n),r=i(r,t)},Page.prototype.showDialog=function(o){var e=this.get("__pageDialog__");e&&this.hideDialog(e);var t=$(o),n=$(".common-cover");t.addClass("show"),n.addClass("show"),this.set("__pageDialog__",o)},Page.prototype.hideDialog=function(o){var e=$(o),t=$(".common-cover");e.removeClass("show"),t.removeClass("show"),this.set("__pageDialog__",void 0)},Page.prototype.set=function(o,e){return this.prop[o]=e,e},Page.prototype.get=function(o){return this.prop[o]},Page.prototype.validateFail=function(){},Page.prototype.post=function(o,e){var t=session();t.del("__postData__"),t.set("__postData__",JSON.stringify(e)),location.href=o},Page.prototype.getPostData=function(){var o=session(),e=JSON.parse(o.get("__postData__"));return e},Page.prototype.getConfirmData=function(){var o=session(),e=JSON.parse(o.get("param"));return e},Page.prototype.jump=function(o,e){e&&("[object Array]"!==Object.prototype.toString.call(e)&&(e=[e]),e.unshift(Config.get("baseHash")),o+=e.join("/")),location.href=o},$(function(){function o(){function o(){user().isLogin()?user().isNameAuth()?($(".commonNavTop .right").addClass("logon"),$(".commonNavTop .welcome").text("欢迎您，"+session().get("userName"))):($(".commonNavTop .right").addClass("logon"),$(".commonNavTop .welcome").text("欢迎您，"+session().get("login")),console.log(session().get("login"))):($(".commonNavTop .right").removeClass("logon"),$(".commonNavTop .welcome").text(""))}var e=Url.getSearchParts("token");e&&""!=e?(session().set("sessionKey",e),user().updateUserInfo(o)):o()}function e(){(new Page).jump(Config.get("homePath")+"user/login/")}$("#viewall").on("click",function(){if(user().isLogin())window.location.href="/html/account/viewall";else{var o=window.location.origin+"/html/account/viewall";window.location.href.indexOf("lingtouniao.com")!=-1?window.location.href="http://www.lingtouniao.com/html/user/login?url="+o:window.location.href="http://192.168.18.194:1950/html/user/login?url="+o}}),$("#loginLink").on("click",function(){var o=urlUtil().getUrl();o.indexOf("login")>-1?window.location.href="/html/user/login?url="+window.location.origin:window.location.href="/html/user/login?url="+window.location.href}),$(".commonNavTop .logoff").on("click",function(){(new Page).getData("/user/login/logout",{},[user().logoff,o,e])}),$("#logo").on("click",function(){window.location.href="/"}),o()});