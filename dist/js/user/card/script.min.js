$(function(){var e={user:"",testBindCard:function(e,t){var a={belongBank:e,cardId:t,pictureCode:"8888",machineNo:"99999"};user().goNewPage(a,"6"),$("#message").show(),$("#cover").show()},getBanList:function(){var e={clientType:constant().clientType};$.post(constant().url+"/bank/list/bk",e,function(e,t){if("success"==t&&"0"==e.resultCode){var a=e.data.list;template().renduTemplate("templateBank","txtBank",a)}})},userIsRealname:function(){user().getUserInfo(e.goRealname)},goRealname:function(){user().user.certification?$("#txtName").val(user().user.userName):window.location.href="/html/user/realname"},Desc:function(){var e={clientType:constant().clientType};$.post(constant().url+"/bank/list/bk",e,function(e,t){if("success"==t&&"0"==e.resultCode){var a=e.data.list;template().renduTemplate("tempfuceng","floating",a)}})},init:function(){user().updateUserInfo(e.userIsRealname),user().isBindCard()&&user().goBack("/html/user/cardsuccess"),e.getBanList(),e.Desc()}};e.init(),$("#submit").not(".disabled").on("click",function(){if(user().testSubmit(),0!=$("#form").find(".validate-failed").length)return!1;var t=$("#txtBank").val(),a=strUtil().trim($("#txtCard").val());e.testBindCard(t,a)}),$("#bindSuccess").on("click",function(){function e(){user().isBindCard&&user().goBack("/html/user/cardsuccess")}user().updateUserInfo(e),$("#cover").hide()}),$("#bindFailed").on("click",function(){user().updateUserInfo(),$("#cover").hide(),location.href="/help/certificate"}),$("input:not(:checkbox,:radio),textarea").on("blur",function(){_this=$(this);var e=_this.parent().parent(),t=e.find(".validation"),a="validate-success",n="validate-failed";validate().vd(_this,e,t,a,n,!1)}),$("input:not(:checkbox,:radio),textarea").on("focus",function(){var e=$(this).parent().parent();e.removeClass(validate().vdFailed);var t=e.find(".validation");t.html(""),$("#loginTip").hide(),$("#submit").removeClass("disabled"),$("#submit").attr("disabled",!1),$("#submit").html("立即绑卡")}),$("#speed").on("click",function(){$("#bank").show(),$(".cover").show()}),$("#close").on("click",function(){$("#bank").hide(),$(".cover").hide()}),$("#closeBk").on("click",function(){$("#message").hide(),$("#cover").hide()}),""==$("#txtCard").val()&&($("#submit").addClass("disabled"),$("#submit").attr("disabled",!0))});