!function(){var n=new Page;n.setTitle("借款进度");var t={dist:location.href.substr(0,location.href.indexOf("/",7)),isLogin:function(){return"undefined"!=typeof user&&user().isLogin()},Login:function(n){n=n||location.href,location.href=this.dist+"/html/user/login/?url="+encodeURIComponent(n)},RealName:function(n){n=n||location.href,location.href=this.dist+"/html/user/realname/?url="+encodeURIComponent(n)},getRealName:function(n){return $.post(constant().url+"/account/center/nameAuthInfo",{clientType:constant().clientType,sessionKey:constant().sessionKey})},testValida:function(n){var a=t.isLogin();a?t.getRealName().done(function(t,a){"success"==a&&"0"==t.resultCode?n&&n(t.data):alert(user().testResultCode(t.resultCode))}).fail(function(){alert("获取实名认证请求失败")}):t.Login()},getLoan:function(n){var t=constant().url+"/user/loanInfo/query",a=this;$.get(t,{clientType:constant().clientType,loanType:Url.getSearchParts("type"),sessionKey:constant().sessionKey},function(t,e){"success"==e&&"0"==t.resultCode?t.data.loanQueryEntry.followTag!=-1?n&&n(t):location.href=a.dist+"/html/loan/loan-index/":alert(user().testResultCode(t.resultCode))})}};t.testValida(function(n){1==n.certification?t.getLoan(function(n){var t={},a=String(n.data.loanQueryEntry.followTag);switch(a){case"11":t.plan=1,t.title="恭喜您！您的借款申请已经提交成功！",t.detail="我们的借款专员将尽快与您联系，请您保持电话畅通",t.status=String(n.data.loanQueryEntry.isSuccess),t.reason=n.data.loanQueryEntry.reason;break;case"21":t.plan=2,t.title="恭喜您！您的借款申请已受理！",t.detail="请根据专员的要求提供具体资料！",t.status=String(n.data.loanQueryEntry.isSuccess),t.reason=n.data.loanQueryEntry.reason;break;case"31":t.plan=3,t.title="恭喜您！您的资料已提交审核！",t.detail="我们会通过短信或邮件通知您审核结果！请注意查收！",t.status=String(n.data.loanQueryEntry.isSuccess),t.reason=n.data.loanQueryEntry.reason;break;case"41":t.plan=4,t.title="恭喜您！您的借款申请已通过审核！",t.detail="您的借款专员会与您联系具体放款事宜！",t.status=String(n.data.loanQueryEntry.isSuccess),t.reason=n.data.loanQueryEntry.reason}template().renduTemplate("tmpLoanPlan","htmLoanPlan",t),"41"==a?($("#agin").show(),$("#agin").on("click",function(){"6"==n.data.loanQueryEntry.loanType?window.location.href="/html/loan/loan-content/first-loan":"4"==n.data.loanQueryEntry.loanType?window.location.href="/html/loan/loan-content/ransom-floor":"2"==n.data.loanQueryEntry.loanType&&(window.location.href="/html/loan/loan-content/final-payment")})):"0"==n.data.loanQueryEntry.isSuccess&&($("#agin").show(),$("#agin").on("click",function(){"6"==n.data.loanQueryEntry.loanType?window.location.href="/html/loan/loan-content/first-loan":"4"==n.data.loanQueryEntry.loanType?window.location.href="/html/loan/loan-content/ransom-floor":"2"==n.data.loanQueryEntry.loanType&&(window.location.href="/html/loan/loan-content/final-payment")}))}):t.RealName()})}();