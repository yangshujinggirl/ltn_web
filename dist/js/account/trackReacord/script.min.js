var start={elem:"#start",format:"YYYY-MM-DD",min:laydate.now(),max:"2099-06-16",istime:!0,istoday:!1,choose:function(t){end.min=t,end.start=t}},end={elem:"#end",format:"YYYY-MM-DD",min:laydate.now(),max:"2099-06-16",istime:!0,istoday:!1,choose:function(t){start.max=t}};laydate(start),laydate(end),laydate({elem:"#startTime",format:"YYYY-MM-DD",festival:!0}),laydate({elem:"#endTime",format:"YYYY-MM-DD",festival:!0}),$(function(){function t(t,e){var n=t.split("-"),a=parseInt(n[0]),i=parseInt(n[1])-1,o=parseInt(n[2]),c=new Date(a,i,o);c.setMonth(c.getMonth()-e);var l=parseInt(c.getMonth())+1;return l<=0&&(a-=-1),c.getFullYear()+"-"+(l<10?"0"+l:l)+"-"+(o<10?"0"+o:o)}var e=session().get("userStatus"),n=session().get("userType"),a=new Page,i=new Date,o=i.getFullYear(),c=i.getMonth()+1,l=i.getDate(),s=o+"-"+(c<10?"0"+c:c)+"-"+(l<10?"0"+l:l),r="";a.getdifference=function(){function t(t){a.isSuccess(t)&&a.set("usableBalance",t.data.usableBalance)}return a.getData("/user/totalAccount",{clientType:"PC"},[t])},a.getHead=function(){function t(t){if(a.isSuccess(t)){var e=t.data;e.usableBalance=a.get("usableBalance"),a.initTemplate(e,"detailHead","tempDetailhead")}}function i(){"1"==n?("-1"==e?$("#chargeBtn").on("click",function(){window.location.href="/html/account/submitFail/"}):"0"==e?$("#chargeBtn").on("click",function(){window.location.href="/html/account/submitSuccess/"}):"2"==e?$("#chargeBtn").on("click",function(){window.location.href="/html/account/openAccount/"}):"1"==e&&$("#chargeBtn").on("click",function(){window.location.href="/html/account/bank2"}),$("#investBtn").on("click",function(){window.location.href="/finance/list/0/1/0/0"})):($("#investBtn").on("click",function(){window.location.href="/finance/list/0/1/0/0"}),$("#chargeBtn").on("click",function(){window.location.href="/html/account/bank"}))}return a.getData("/account/fixed/homepage",{clientType:"PC"},[t,i])},a.leftnav=function(){for(var t=location.pathname,e=$("#leftnav .item"),n=0,a=e.length;n<a;n++)e[n].href.indexOf(t)!=-1&&(e[n].className="selected item")},a.contract=function(t){var e=t.attr("data-id"),n={orderNo:e};user().goNewPage(n,"10")},a.allPag=function(){function t(t){a.allDetail(t)}$(".pages").paging({totalSize:a.get("totalCount"),turnSize:5,pageSize:7,callback:t})},a.allDetail=function(t){function e(t){if(a.isSuccess(t)){var t=t.data;a.initTemplate(t,"fundDetail","tempDetail"),a.set("totalCount",t.totalCount)}"0"==t.totalCount?$("#nolist1").show():$("#nolist1").hide()}function n(){$(".inAgree").on("click",function(){a.contract($(this))})}return a.getData("/account/current/orderList",{clientType:"PC",status:"10",currentPage:t||0,pageSize:7,startTime:$("#startTime").html(),endTime:$("#endTime").html()},[e,n])},a.tenderPag=function(){function t(t){a.tender(t)}$(".pages").paging({totalSize:a.get("totalCount"),turnSize:5,pageSize:7,callback:t})},a.tender=function(t){function e(t){if(a.isSuccess(t)){var t=t.data;a.initTemplate(t,"fundDetail","tempDetail"),a.set("totalCount",t.totalCount)}"0"==t.totalCount?$("#nolist1").show():$("#nolist1").hide()}function n(){$(".inAgree").on("click",function(){a.contract($(this))})}return a.getData("/account/current/orderList",{clientType:"PC",status:"1",currentPage:t||0,pageSize:7,startTime:$("#startTime").html(),endTime:$("#endTime").html()},[e,n])},a.holdPag=function(){function t(t){a.hold(t)}$(".pages").paging({totalSize:a.get("totalCount"),turnSize:5,pageSize:7,callback:t})},a.hold=function(t){function e(t){if(a.isSuccess(t)){var t=t.data;a.initTemplate(t,"fundDetail","tempDetail"),a.set("totalCount",t.totalCount)}"0"==t.totalCount?$("#nolist1").show():$("#nolist1").hide()}function n(){$(".inAgree").on("click",function(){a.contract($(this))})}return a.getData("/account/current/orderList",{clientType:"PC",status:"2",currentPage:t||0,pageSize:7,startTime:$("#startTime").html(),endTime:$("#endTime").html()},[e,n])},a.repaymentPag=function(){function t(t){a.repayment(t)}$(".pages").paging({totalSize:a.get("totalCount"),turnSize:5,pageSize:7,callback:t})},a.repayment=function(t){function e(t){if(a.isSuccess(t)){var t=t.data;a.initTemplate(t,"fundDetail","tempDetail"),a.set("totalCount",t.totalCount)}"0"==t.totalCount?$("#nolist1").show():$("#nolist1").hide()}function n(){$(".inAgree").on("click",function(){a.contract($(this))})}return a.getData("/account/current/orderList",{clientType:"PC",status:"4",currentPage:t||0,pageSize:7,startTime:$("#startTime").html(),endTime:$("#endTime").html()},[e,n])},a.paidPag=function(){function t(t){a.paid(t)}$(".pages").paging({totalSize:a.get("totalCount"),turnSize:5,pageSize:7,callback:t})},a.paid=function(t){function e(t){if(a.isSuccess(t)){var t=t.data;a.initTemplate(t,"fundDetail","tempDetail"),a.set("totalCount",t.totalCount)}"0"==t.totalCount?$("#nolist1").show():$("#nolist1").hide()}function n(){$(".inAgree").on("click",function(){a.contract($(this))})}return a.getData("/account/current/orderList",{clientType:"PC",status:"3",currentPage:t||0,pageSize:7,startTime:$("#startTime").html(),endTime:$("#endTime").html()},[e,n])},a.typeTab=function(){"all"==$("#change .selected").data("content")?a.when(a.allDetail,[a.allPag]):"tender"==$("#change .selected").data("content")?a.when(a.tender,[a.tenderPag]):"hold"==$("#change .selected").data("content")?a.when(a.hold,[a.holdPag]):"repayment"==$("#change .selected").data("content")?a.when(a.repayment,[a.repaymentPag]):"paid"==$("#change .selected").data("content")&&a.when(a.paid,[a.paidPag])},$("#time .item").on("click",function(){$(this).addClass("selected").siblings().removeClass("selected"),"allDate"==$(this).data("time")?($("#startTime").html(""),$("#endTime").html(""),a.typeTab()):"today"==$(this).data("time")?($("#startTime").html(s),$("#endTime").html(""),a.typeTab()):"one"==$(this).data("time")?(r=t(s,1),$("#startTime").html(r),$("#endTime").html(s),a.typeTab()):"three"==$(this).data("time")?(r=t(s,3),$("#startTime").html(r),$("#endTime").html(s),a.typeTab()):"six"==$(this).data("time")&&(r=t(s,6),$("#startTime").html(r),$("#endTime").html(s),a.typeTab())}),$("#change .item").on("click",function(){$(this).addClass("selected").siblings().removeClass("selected"),"all"==$(this).data("content")?a.when(a.allDetail,[a.allPag]):"tender"==$(this).data("content")?a.when(a.tender,[a.tenderPag]):"hold"==$(this).data("content")?a.when(a.hold,[a.holdPag]):"repayment"==$(this).data("content")?a.when(a.repayment,[a.repaymentPag]):"paid"==$(this).data("content")&&a.when(a.paid,[a.paidPag])}),a.init=function(){a.when(a.getdifference,[a.getHead]),a.when(a.allDetail,[a.allPag])},a.init()});