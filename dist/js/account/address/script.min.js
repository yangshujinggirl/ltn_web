$(function(){var e=new Page,t=t;$(".add").on("click",function(){$(".form").show(),$(".none_address").hide()});var s={getImageCode:function(){$("input,select,textarea").on("blur",function(){_this=$(this);var e=_this.parent().parent(),t=e.find(".validation"),i="validate-success",a="validate-failed";validate().vd(_this,e,t,i,a,!1),s.addEvent(_this,e,t),""==$("#txtTel").val()&&(e.addClass("validate-failed").removeClass("validate-success"),t.html(this.placeholder))})},addEvent:function(e,t,s){"txtName"==e.attr("id")&&!t.hasClass("validate-failed")&&strUtil().trim(e.val()).length>0||"txtTel"==e.attr("id")&&!t.hasClass("validate-failed")&&strUtil().trim(e.val()).length>0},address:function(t,i,a,d,n){var o={clientType:constant().clientType,consigneeName:t,detailAddress:i,location:a,mobileNo:d,sessionKey:session().get("sessionKey")};$.post(constant().url+"/addressManage/addAddress",o,function(t,i){if("0"==t.resultCode){var t=t.data;e.initTemplate(t,"propeditors","tempeditors"),$("#propeditors").show(),s.getAddress(),$(".form").hide(),$(".none_address").hide()}})},getAddress:function(t,i,a,d,n){var o={clientType:constant().clientType,sessionKey:session().get("sessionKey")};$.post(constant().url+"/addressManage/getAddress",o,function(t,s){if("0"==t.resultCode){var t=t.data;n=t.id,session().set("id",t.id),e.initTemplate(t,"propeditors","tempeditors"),$("#bianji").on("click",function(){$(".big_box3").show(),$("#form2").show(),$("#propeditors").hide(),$("#city_two").val(t.location),$("#city_two").citypicker({}),$("#detailAddress2").val(t.detailAddress),$("#txtTel2").val(t.mobileNo),$("#txtName2").val(t.consigneeName)})}0==jQuery.isEmptyObject(t)?$("#propeditors").show():$(".none_address").show(),""==t.detailAddress&&$("#dizhi").append("&nbsp;"),""==t.location&&$("#locality").append("&nbsp;"),$(".del").on("click",function(){$("#tankuangLCT").show(),$(".mask").show()}),$(".tkbut1").on("click",function(){$("#tankuangLCT").hide(),$(".mask").hide()}),$("#close2").on("click",function(){$("#tankuangLCT").hide(),$(".mask").hide()})}),$(".tkbut").on("click",function(){s.delAddress(),$("#tankuangLCT").hide(),$(".mask").hide()})},updateAddress:function(e,t,s,i,a){var d=strUtil().trim($("#txtName2").val()),n=$("#city_two").val(),o=$("#detailAddress2").val(),l=$("#txtTel2").val(),a=session().get("id"),r={clientType:constant().clientType,sessionKey:session().get("sessionKey"),consigneeName:d,detailAddress:o,location:n,mobileNo:l,id:a};$.post(constant().url+"/addressManage/updateAddress",r,function(e,t){if("0"==e.resultCode)var e=e.data})},delAddress:function(){var e=session().get("id"),t={clientType:constant().clientType,sessionKey:session().get("sessionKey"),id:e};$.post(constant().url+"/addressManage/delAddress",t,function(e,t){if("0"==e.resultCode)var e=e.data;0==jQuery.isEmptyObject(e)?$("#propeditors").show():($(".none_address").show(),$("#propeditors").hide())})},init:function(){$("#city-picker3").citypicker({}),s.getAddress()}};s.init(),$(".address_but").on("click",function(){if(user().testSubmit(s.addEvent),0!=$("#form").find(".validate-failed").length)return!1;var e=strUtil().trim($("#txtName").val()),t=$("#city-picker3").val(),i=$("#detailAddress").val(),a=$("#txtTel").val();s.address(e,i,t,a)}),$(".address_but2").on("click",function(){if(user().testSubmit(s.addEvent),0!=$("#form2").find(".validate-failed").length)return!1;var e=strUtil().trim($("#txtName2").val()),t=$("#city_two").val(),i=$("#detailAddress2").val(),a=$("#txtTel2").val();s.updateAddress(e,i,t,a),window.location.reload(),$("#propeditors").show(),$(".big_box3").hide()})});