$(function(){var t=new Page;t.noticeList={};var n=constant().clientType,e=constant().sessionKey,o=session().get("userStatus"),c=session().get("userType");t.isMoodalShow=function(){user().isNameAuth()||$(".common-cover,.viewall-modal-content").show(),t.modalEvent()},t.modalEvent=function(){$("#modal-cancel").on("click",function(){$(".common-cover,.viewall-modal-content").hide()}),$("#go-realname").on("click",function(){window.location.href="/html/user/realname"})},t.companyShow=function(){user().getUserType()&&$("#propBanner").hide()},t.getbanner=function(){function n(n){var n=n.data;t.initTemplate(n,"propBanner","tempBanner")}function o(t){var t=t.data;"1"==t.bannerFlag_TYB?$("#startBanner").show():"1"==t.bannerFlag_BK?$("#cardBanner").show():"1"==t.bannerFlag_SM?$("#realnameBanner").show():"1"==t.bannerFlag_GS?$("#firstBanner").show():"1"==t.bannerFlag_HD&&$(".stretch").show(),$("#firstBut").on("click",function(){ID=$(this).attr("data-id"),ID=t.productId,window.location.href="/html/product/first/#!/"+ID})}return t.getData("/pc/account/overview/banner",{clientType:"PC",sessionKey:e},[n,o])},t.getviewall=function(){function a(n){if(t.isSuccess(n)){var n=n.data;t.initTemplate(n,"viewalldetail","tempviewall"),t.initTemplate(n,"propContent","tempContent")}}function i(){"1"==c?("-1"==o?$("#recharge_button,#postal_button").on("click",function(){window.location.href="/html/account/submitFail/"}):"0"==o?$("#recharge_button,#postal_button").on("click",function(){window.location.href="/html/account/submitSuccess/"}):"2"==o?$("#recharge_button,#postal_button").on("click",function(){window.location.href="/html/account/openAccount/"}):"1"==o&&$("#recharge_button,#postal_button").on("click",function(){window.location.href="/html/account/bank2/"}),$("#invest_button").on("click",function(){window.location.href="/finance/list/0/1/0/0"})):($("#postal_button").on("click",function(){window.location.href="/html/account/bank/?control=depost"}),$("#recharge_button").on("click",function(){window.location.href="/html/account/bank/?control=recharge"}),$("#invest_button").on("click",function(){window.location.href="/finance/list/0/1/0/0"}))}function r(n){if(t.isSuccess(n)){var e=$("#earnheader").children(".item");e.on("click",function(){window.location.href=$(this).data("content")})}}function u(n){if(t.isSuccess(n)){var n=n.data,e=$("#echartview")[0],o=echarts.init(e);option={tooltip:{trigger:"item",formatter:"{a} <br/>{b} : {c} ({d}%)"},legend:{orient:"vertical",icon:"circle"},series:[{name:"账户总览",type:"pie",minAngle:"20",radius:["40%","60%"],center:["50%","50%"],data:[{value:n.collectRevenue,name:"待收收益"},{value:n.usableBalance,name:"可用余额"},{value:n.collectCapital,name:"待收本金"},{value:n.frozenAmount,name:"冻结余额",selected:"true"}]}],color:["#ec5401","#fcd160","#78e8b8","#42b9fd"]},o.setOption(option)}}return t.getData("/user/totalAccount",{clientType:n,sessionKey:e},[a,r,i,u])},t.getticket=function(){function n(n){if(t.isSuccess(n)){var n=n.data;t.initTemplate(n,"propTicket","tempTicket")}}return t.getData("/pc/account/overview/couponInfo",{clientType:"PC"},[n])},t.getProduct=function(){function n(n){var n=n.data;t.pushNoticeList(n.productList),t.initTemplate(n,"propProduct","tempProduct")}function e(n){$(".recommend_but").on("click",function(){var n=$(this).attr("data-id"),e=t.noticeList[n],o={productId:e.productId,productName:e.productName,productType:e.productType,progress:e.progress,annualIncomeText:e.annualIncomeText,convertDay:e.convertDay,productRemainAmount:e.productRemainAmount,productTotalAmount:e.productTotalAmount,staInvestAmount:e.staInvestAmount,usableBalance:e.usableBalance,staRateDate:e.staRateDate,endDate:e.endDate,repaymentType:e.repaymentType};"XSB"==e.productType?t.post("/html/product/first/#!/"+n,o):"LCTXL"==e.productType?t.post("/html/product/long/#!/"+n,o):"LCT"==e.productType&&t.post("/html/product/short/#!/"+n,o)})}function o(t){$(".recommend .caption").mouseover(function(){$(this).find(".recommend_but").stop().slideToggle("fast")}),$(".recommend .caption").mouseout(function(){$(this).find(".recommend_but").stop().slideToggle("fast")}),$(".little_icon").mouseover(function(){$("#start_tips").show()}),$(".little_icon").mouseout(function(){$("#start_tips").hide()})}return t.getData("/pc/account/overview/getRecommendProducts",{clientType:"PC"},[n,e,o])},t.pushNoticeList=function(n){if(n.length>0)for(var e=0;e<n.length;e++)t.noticeList[n[e].productId]=n[e]},t.leftnav=function(){for(var t=location.pathname,n=$("#leftnav .item"),e=0,o=n.length;e<o;e++)n[e].href.indexOf(t)!=-1&&(n[e].className="selected item")},t.init=function(){t.setTitle("领投鸟理财-不动产理财颠覆者-账户总览"),t.getbanner(),t.getviewall(),t.getticket(),t.getProduct(),t.companyShow(),t.isMoodalShow()},t.init()});